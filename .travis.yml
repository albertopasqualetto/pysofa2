language: python

notifications:
  email: false

python:
  - '3.6'
  - '3.7'

dist: xenial

before_script:
  - pip install -U -r requirements.txt
  - pip install -U -r requirements-dev.txt

script:
  # Install and build package
  - pip install -e .
  # Run tests
  - pytest --cov=pysofa2
  # - pytest --cov=pysofa2 --cov-report html:coverage_report --cov-report term tests
  # - travis-sphinx --outdir docs/build build --source docs/source

after_success:
  - coveralls
  # - travis-sphinx --outdir docs/build deploy

deploy:
  provider: pypi
  user:
    secure: "XmKMtatc8y0D04bh5D08w3WUc3wyxO8g6uRfMuQeFaTvovdig6T0oFKxdxpiHOvx1GT85zDt5B3mV7cdtbmtK0L/Q6c11HFBDCPJJkmFYpkgyk+NRSw2cbQlD1Fd5vy+mP0Pas+NOv1fL/op1dsrHBwy6D3ok0fEMUa11zDSmlkmuyzNx4vDzJzCgMdH7gZfSS9M5wErq6ncc2VCWEUKSKOnsdpn5gVvk8dDCGwv2QO6LgUkcEay5WFzNI/pyVJ5Qq8gWW2Li8rIfZ4NEhnBiGlMmy6KTNl4hY++m0GIssa7ZWUJORsHtyiCPOKtG/MyaTcIm+/XaGbCgb/lE0PQlh//n/SHKxPdd9tT7DtFxGfh7lxCTDaoVIK0wbvXmb+/KdTNwdGc6zaGEB2Rns9YgcfwXVck4DoaEnnT7Gw901JSGbqkgMTLAOoJygcMS3B3Y3QGOxFdpq+HoR5zPWVrZufkEEDP/WINJgyd1lX+7dgXoEkExT7D0HgQTwT+TBSu3hbyfYn35DpnrUUr0SrBhRUVITqRWZL3+rj8BGDamNbePzvbHOHAMO6DIW89JU/jd6NpxQwWLCinj5Pz5agslGpoMYcg+NUu3ESLJ4yD9HoOMYxWJS+4PXSY16lI6vDn7pO5ShQ04NQ6S/SzgyMCmjswPLIIqKNZuyCVTT7zr74="
  password:
    ssecure: "OshsKi/2vUVY0wPY81iYfzBOjhlt4YNu8dFefQIrHFXGaaU2xuXZum43S82q9r0DwzGiZdnyVaGtuA7shVu3goyROZNYxW/biGbc+92V7usmRdBc/Ih/2FS4w7KFl7ZYEP6trw2a2O50D1V1E/WWG6k9zHKc2ryxD837u3vGt0Lh812HcPIHpfTIiz0yXl9mVbCKVUzdgOrj3bvvFwzmf8+BIIAc+ARTgk64cLGStBxddSlUj8qFJFLbdErlUf34QTme/kZi6SMmsj+GdP0i6/g0sAWqUQH3a8YcJ7+PU1QvhvhOzfYM0BYZIJM3mYTV9kA+SzqLakoKq+mgpttr+vNxY78CEcLNwiUVaq/9v03P7TuHSnelRNsfO0mOBM1jciKzsS+C9O267j5JOh1LUg61Rp6zb/+k5xH51/NygUBswVmqrLsYg9pobGwOMll9zJzkazf1KE6e+dME6tMyp+VZa933ZhjsEfrrE/KKNqTEuZHG5ODSwT0ek0FOMB+kNIa6evURvk1jCeMeIRieM52wl0e9qhruUi6awPfKFm8l9K90afRIxxcMNaFj0i0oMWL4QXlXL/OOl8/RGG1Ij6V2RE0JS7o3HIWOwMsG1ACPNjZlTprcwZwhsHSugXi8RYtCAWB6Z2QmJUfoq6G3rJCSF4e91oYqPKflzoSCeHU="
  on:
    tags: true
  skip_existing: true